# 动态规划

### 序列型动态规划

**题目 Paint House**
![image-20210517081634715](C:\Users\ajay\AppData\Roaming\Typora\typora-user-images\image-20210517081634715.png)

一、确定状态
最优策略是花费最小的策略
最后一步：最优策略中房子N-1一定染成了红、蓝、绿中的一种
所以如果最优策略中房子N-1是红色，房子N-2只能是蓝色或绿色

**不知道房子N-2是什么颜色，就把它记录下来！**
求油漆前N栋房子并且N-1是红色、蓝色、绿色的最小花费
需要知道油漆前N-1栋房子并且房子N-2是红色、蓝色、绿色的最小花费
状态：设油漆前i栋房子并且房子i-1是红色、蓝色、绿色的最小花费分别为

```C++
f[i][0],f[i][1],f[i][2]
```

二、转移方程

```C++
f[i][0] = min{f[i-1][1]+cost[i-1][0],f[i-1][2]+cost[i-1][0]} //红色的情况，其他的也是差不多
```

三、初始条件和边界情况

```C++
//初始条件
f[0][0]=f[0][1]=f[0][2]=0;//不油漆任何房子的花费
//无边界情况
```

四、计算顺序
从小到大记录，答案为全部取min

序列型动态规划：...前i个...最小/方式数/可行性

**技巧：序列+状态**

### 划分型动态规划

leetcode 91 解密方式

![image-20210518091541410](C:\Users\ajay\AppData\Roaming\Typora\typora-user-images\image-20210518091541410.png)

一、确定状态
解密数字串即划分成若干段数字，每段数字 对应一个字母
最后一步：对应一个字母
-A,B,...,或Z

**子问题**

设数字串长度为N
要求数字串前N个字符的解密方式数
需要知道数字串前N-1和N-2个字符的解密方式数
状态：设数字串S前i个数字解密成字母串有f[i]种方式

二、转移方程
 ![image-20210518092341324](C:\Users\ajay\AppData\Roaming\Typora\typora-user-images\image-20210518092341324.png)

三、初始条件和边界情况

设数字串S前i个数字解密成字母串有f[i]种方式

初始条件：f[0]=1,即空串有1种方式解密，解密成空串
四、计算顺序

f[0],f[1],f[2]

### 坐标型动态规划

给定一个序列或网格
**找到网格或序列中的某条路径**
某种性质最大/最小
计数
存在性

坐标型动态规划的初始条件f[0]就是指以a<sub>0</sub>>为结尾的子序列的性质

#### 最长连续单调子序列

![image-20210519085052705](C:\Users\ajay\AppData\Roaming\Typora\typora-user-images\image-20210519085052705.png)

一、确定状态

a[j]是当前最小子序列，则a[j-1]也是

二、转移方程

```c++
f[j] = max{1, f[j-1]+1 | j>0 and a[j-1] < a[j]}
```

三、初始条件和边界情况

情况2必须满足:
-j>0,即a[]前面至少还有一一个元素
-a[j]> a[j-1],满足单调性
初始条件:空

四、计算顺序

f[0], f[1],....,f[n-1]

#### Minimum Path Sum

![image-20210525085924927](C:\Users\ajay\Desktop\OneDrive\刷题笔记\动态规划题型.assets\image-20210525085924927.png)

一、确定状态

**最值型动态规划**

右下角坐标设为（m-1, n-1）

**子问题**

状态：

--设从（0，0）走到（i，j）的路径最小数字总和f[i] [j]

二、转移方程

```c++
f[i][j]=min{f[i-1][j],f[i][j-1]}+A[i][j]
```



三、初始条件和边界情况

```
f[0][0]=A[0][0]
```

四、计算顺序

从小到大

![image-20210525094715786](C:\Users\ajay\Desktop\OneDrive\刷题笔记\动态规划题型.assets\image-20210525094715786.png)

### 空间优化

**滚动数组**

由于仅仅用到两行来记录空间，所以仅仅用所用空间的数组来记录

![image-20210526140134415](C:\Users\ajay\Desktop\OneDrive\刷题笔记\动态规划题型.assets\image-20210526140134415.png)

![image-20210526140149083](C:\Users\ajay\Desktop\OneDrive\刷题笔记\动态规划题型.assets\image-20210526140149083.png)

#### Bomb Enemy

![image-20210531091325848](C:\Users\ajay\Desktop\OneDrive\刷题笔记\动态规划题型.assets\image-20210531091325848.png)

一、确定状态

![image-20210531092022084](C:\Users\ajay\Desktop\OneDrive\刷题笔记\动态规划题型.assets\image-20210531092022084.png)

![image-20210531092052030](C:\Users\ajay\Desktop\OneDrive\刷题笔记\动态规划题型.assets\image-20210531092052030.png)

二：转移方程

![image-20210531092124253](C:\Users\ajay\Desktop\OneDrive\刷题笔记\动态规划题型.assets\image-20210531092124253.png)

三、初始条件和边界情况

![image-20210531092253115](C:\Users\ajay\Desktop\OneDrive\刷题笔记\动态规划题型.assets\image-20210531092253115.png)

四、计算顺序

逐行计算

有四个方向，计算顺序会改变

![image-20210531092531164](C:\Users\ajay\Desktop\OneDrive\刷题笔记\动态规划题型.assets\image-20210531092531164.png)

### 总结

![image-20210531093335392](C:\Users\ajay\Desktop\OneDrive\刷题笔记\动态规划题型.assets\image-20210531093335392.png)

### 打印路径

关键在于记录上一步的路径，然后再记录，再倒序输出

### 位操作型动态规划

位操作（二进制）
逐位操作

#### Counting Bits

![image-20210604110701094](C:\Users\ajay\Desktop\OneDrive\刷题笔记\动态规划题型.assets\image-20210604110701094.png)

一、确定状态

##### 子问题

●要求N的二进制表示中有多少1
●在N的二进制去掉最后一位N mod 2,设新的数是Y=(N>>.1)(右移一位)
●要知道Y的二进制表示中有多少1

**左移相当于乘2，右移相当于乘2<sup>n</sup>**

状态：设f[i]表示i的二进制表示中有多少个1

二、转移方程

**知识点:和位操作相关的**
**动态规划一般用值作状态**

```
f[i] = f[i>>1]+(i mod 2)
```

三、初始条件和边界情况

f[0] = 0

四、计算顺序

从小到大